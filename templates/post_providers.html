<!DOCTYPE html>
<html>
  <head>

    <title>post a new provider</title>
    <link rel="shortcut icon" href="">
    <link type="text/css" rel="stylesheet" href="/static/css/post_forms.css" />
  </head>
  <body>
    <div class='head'>
      <h4> <a href='/'>ðŸŽ¬</a>&nbsp &nbsp &nbsp<a href="/providers">Providers</a>&nbsp &nbsp &nbsp<a
             href="/customers">Customers</a> &nbsp &nbsp &nbsp<a
             href="/events">Events </a></h4>
    </div>
    <div class='page'>
      <div class='row'>
        <ul class="form-wrapper">
          <h3 class="form-heading"> List a new provider </h3>
          <form id='form'>
            <li><label>Name</label>
            <li><input id='name' type="text" name="name" value="">
            <li><label>Services offered</label>
            <li><input id='services_offered' type="text" value="">
            <li><label>Area</label>
            <li><input id='area' type="text" name="area" value="">
            <li><label>Adress</label>
            <li><input id='adress' type="text" name="adress" value="">
            <li><label>Phone</label>
            <li><input id='phone' type="text" name="phone" value="">
            <li><label>Website</label>
            <li><input id='website' type="text" name="website" value="">
            <li><label>social_media</label>
            <li><input id='social_media' type="text"name="social_media"value="">
            <li><label>image link</label>
            <li><input id='image_link' type="text" name="image_link" value="">
            <li><input class='button' type="submit">
          </form>
        </ul>
      </div>
    </div>
    <div class='head'>
      <p> <em>Powerd by Valerian Ardelean Â© 2020</em></p>
    </div>
    <script>
      var a = document.getElementById('form');
      a.onsubmit = function(e) {
        e.preventDefault()
        var name = document.getElementById('name')
        var services_offered = document.getElementById('services_offered')
        var city = document.getElementById('area')
        var adress = document.getElementById('adress')
        var phone = document.getElementById('phone')
        var website = document.getElementById('website')
        var social_media = document.getElementById('social_media')
        var image_link = document.getElementById('image_link')
        token = sessionStorage.getItem("token")
        fetch('/providers', {
          method : 'POST',
          body : JSON.stringify({
            'name': name.value,
            'services_offered' : services_offered.value,
            'city': area.value,
            'adress': adress.value,
            'phone': phone.value,
            'website': website.value,
            'social_media': social_media.value,
            'image_link': image_link.value,}),
          headers : {"Authorization": "Bearer " + token, "Content-Type":"application/json"}
        })
        .then(respond => respond.json())
        .then(jsonRespond => {
          if (jsonRespond) {
            window.location.href = jsonRespond.redirect
          } else {
            alert('bad request')
          };
        });
      }
    </script>
  </body>
</html>
